openapi: 3.0.0
info:
  title: CMS Task API
  description: API for managing tasks in the CMS. Use this to create tasks from Gemini.
  version: 1.0.0
servers:
  - url: https://unsilly-dexter-unpersonifying.ngrok-free.dev/api
    description: Production server or ngrok tunnel
paths:
  /tasks/:
    post:
      operationId: createTask
      summary: Create a new task
      description: Creates a new task in the CRM.
      parameters:
        - in: header
          name: ngrok-skip-browser-warning
          schema:
            type: string
            default: "true"
          required: false
        - in: header
          name: X-Gemini-Secret
          schema:
            type: string
            default: "gemini-key-secret-with-custom-password-azerty-or-qzerty"
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
              properties:
                title:
                  type: string
                  description: The title of the task.
                description:
                  type: string
                  description: Detailed description of the task.
                priority:
                  type: string
                  enum: [low, medium, high]
                  default: medium
                  description: Priority level of the task.
                status:
                  type: string
                  enum: [todo, in_progress, done]
                  default: todo
                  description: Current status of the task.
                due_date:
                  type: string
                  format: date-time
                  description: Due date for the task (ISO 8601 format).
      responses:
        '201':
          description: Task created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: The ID of the created task.
                  title:
                    type: string
                  status:
                    type: string
        '400':
          description: Invalid input

  /crm/companies/:
    get:
      operationId: listCompanies
      summary: List and filter companies
      parameters:
        - in: header
          name: ngrok-skip-browser-warning
          schema:
            type: string
            default: "true"
          required: false
        - in: header
          name: X-Gemini-Secret
          schema:
            type: string
            default: "gemini-key-secret-with-custom-password-azerty-or-qzerty"
          required: true
        - in: query
          name: name
          schema:
            type: string
          description: Filter by company name
      responses:
        '200':
          description: List of companies
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        name:
                          type: string
                        industry:
                          type: string
                        website:
                          type: string
                        notes:
                          type: string
    post:
      operationId: createCompany
      summary: Create a new company
      parameters:
        - in: header
          name: ngrok-skip-browser-warning
          schema:
            type: string
            default: "true"
          required: false
        - in: header
          name: X-Gemini-Secret
          schema:
            type: string
            default: "gemini-key-secret-with-custom-password-azerty-or-qzerty"
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                industry:
                  type: string
                website:
                  type: string
                notes:
                  type: string
      responses:
        '201':
          description: Company created
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  name:
                    type: string

  /crm/contacts/:
    post:
      operationId: createContact
      summary: Create a new contact
      parameters:
        - in: header
          name: ngrok-skip-browser-warning
          schema:
            type: string
            default: "true"
          required: false
        - in: header
          name: X-Gemini-Secret
          schema:
            type: string
            default: "gemini-key-secret-with-custom-password-azerty-or-qzerty"
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - first_name
                - last_name
              properties:
                first_name:
                  type: string
                last_name:
                  type: string
                email:
                  type: string
                company:
                  type: string
                  description: UUID of the company
                position:
                  type: string
      responses:
        '201':
          description: Contact created

  /crm/meetings/:
    get:
      operationId: listMeetings
      summary: List meetings
      parameters:
        - in: header
          name: ngrok-skip-browser-warning
          schema:
            type: string
            default: "true"
          required: false
        - in: header
          name: X-Gemini-Secret
          schema:
            type: string
            default: "gemini-key-secret-with-custom-password-azerty-or-qzerty"
          required: true
        - in: query
          name: date
          schema:
            type: string
          description: Filter by date
      responses:
        '200':
          description: List of meetings
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        title:
                          type: string
                        date:
                          type: string
    post:
      operationId: createMeeting
      summary: Create a new meeting or meeting note
      parameters:
        - in: header
          name: ngrok-skip-browser-warning
          schema:
            type: string
            default: "true"
          required: false
        - in: header
          name: X-Gemini-Secret
          schema:
            type: string
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - company
              properties:
                title:
                  type: string
                company:
                  type: string
                  description: UUID of the company
                date:
                  type: string
                  format: date-time
                notes:
                  type: string
                  description: Meeting summary or notes
                type:
                  type: string
                  enum: [video, phone, in_person]
      responses:
        '201':
          description: Meeting created



